<?xml version="1.0" encoding="utf-8"?>
<build xmlns:hg="http://bitten.edgewall.org/tools/hg"
       xmlns:java="http://bitten.edgewall.org/tools/java"
       xmlns:sh="http://bitten.edgewall.org/tools/sh"
       xmlns:mvn="http://grouplens.org/bitten/mvn">

  <step id="checkout" description="Update source from repository">
    <hg:clone url="http://dev.grouplens.org/hg/lenskit" revision="${revision}" />
  </step>
  
  <step id="build" description="Build and run unit tests">
    <mvn:run goals="clean test" failmode="at-end"/>

    <java:junit file="*/target/surefire-reports/TEST-*.xml"/>
    <!--             srcdir="lenskit-core/src/test/java" /> -->
    <!-- <java:junit file="lenskit-eval/target/surefire-reports/TEST-*.xml" -->
    <!--             srcdir="lenskit-eval/src/test/java" /> -->
    <!-- <java:junit file="lenskit-eval-maven-plugin/target/surefire-reports/TEST-*.xml" -->
    <!--             srcdir="lenskit-eval-maven-plugin/src/test/java" /> -->
    <!-- <java:junit file="lenskit-knn/target/surefire-reports/TEST-*.xml" -->
    <!--             srcdir="lenskit-knn/src/test/java" /> -->
    <!-- <java:junit file="lenskit-svd/target/surefire-reports/TEST-*.xml" -->
    <!--             srcdir="lenskit-svd/src/test/java" /> -->
  </step>

</build>
